!function(){"use strict";var e={568:function(e,t){t.Z='<vr-file-upload-preview\r\n    class="custom-wrapper"\r\n    accept=".png,.jpg,.jpeg,.gif"\r\n    max-files="3"\r\n    max-size="55000"\r\n    multiple\r\n>\r\n    <button class="custom-button">\r\n        Upload\r\n    </button>\r\n</vr-file-upload-preview>\r\n'},688:function(e,t){t.Z="import 'vr-file-upload-preview';\r\nimport 'vr-file-upload-preview/vr-file-upload-preview.min.css';\r\n\r\nconst uploader = document.querySelector('vr-file-upload-preview');\r\n\r\nuploader.addEventListener('change', (e) => {\r\n    console.log(e.detail.files);\r\n    // console.log(uploader.files);\r\n});\r\n\r\nuploader.addEventListener('error', (e) => {\r\n    const {file, type} = e.detail;\r\n\r\n    console.log({file, type});\r\n});\r\n"}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}!function(){function e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function t(e,t){null==t||t.forEach((function(t){t.onlyAttr?t.value?e.setAttribute(t.name,t.value):e.removeAttribute(t.name):e.setAttribute(t.name,t.value)}))}function r(t,n,r){var i,o,a,u,l=document.createElement(t);return null!=r&&null!==(i=r.attributes)&&void 0!==i&&i.length&&r.attributes.forEach((function(e){e.onlyAttr&&!e.value||l.setAttribute(e.name,e.value)})),null!=r&&null!==(o=r.classes)&&void 0!==o&&o.length&&(a=l.classList).add.apply(a,function(t){if(Array.isArray(t))return e(t)}(u=r.classes)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(u)||function(t,n){if(t){if("string"==typeof t)return e(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?e(t,n):void 0}}(u)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),null!=r&&r.styles&&Object.assign(l.style,r.styles),n&&(l.textContent=n),l}function i(e,t,n){t.dispatchEvent(new CustomEvent(e,{bubbles:!1,composed:!0,detail:n}))}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=n){var r,i,o=[],a=!0,u=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){u=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(u)throw i}}return o}}(e,t)||u(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){if(e){if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?f(e):t}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e){var t="function"==typeof Map?new Map:void 0;return(p=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return d(e,arguments,m(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),h(r,e)})(e)}function d(e,t,n){return(d=v()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&h(i,n.prototype),i}).apply(null,arguments)}function v(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var g="vr-preview-image",b="vr-highlight-dropzone";customElements.define("vr-file-upload-preview",function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(R,e);var n,o,p,d,A,w=(n=R,o=v(),function(){var e,t=m(n);if(o){var r=m(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return s(this,e)});function R(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,R),y(f(e=w.call(this)),"files",[]),y(f(e),"rendered",void 0),y(f(e),"inputRef",void 0),y(f(e),"uploadRef",void 0),y(f(e),"containerRef",void 0),y(f(e),"onSelect",(function(t){return e.inputRef.click()})),y(f(e),"onChange",(function(t){return e.changeHandler(t)})),y(f(e),"onRemove",(function(t){return e.removeHandler(t)})),y(f(e),"onDrop",(function(t){return e.filesHandler(t.dataTransfer.files)})),y(f(e),"onHighlight",(function(t){return e.uploadRef.classList.add(b)})),y(f(e),"onUnhighlight",(function(t){return e.uploadRef.classList.remove(b)})),e}return p=R,A=[{key:"observedAttributes",get:function(){return["preview","multiple","accept","max-files","max-size"]}}],(d=[{key:"preview",get:function(){return this.getAttribute("preview")}},{key:"accept",get:function(){return this.getAttribute("accept")}},{key:"multiple",get:function(){var e=this.getAttribute("multiple");return""===e||"true"===e}},{key:"maxFiles",get:function(){var e=parseInt(this.getAttribute("max-files"));return isNaN(e)?null:e}},{key:"maxSize",get:function(){var e=parseInt(this.getAttribute("max-size"));return isNaN(e)?null:e}},{key:"dropzone",get:function(){var e=this.getAttribute("dropzone");return""===e||"true"===e}},{key:"connectedCallback",value:function(){this.render(),this.rendered=!0}},{key:"disconnectedCallback",value:function(){this.defaultEventListners(!1),this.dragOnDropEventListners(!1)}},{key:"attributeChangedCallback",value:function(e,n,r){if(this.rendered)switch(e){case"accept":case"max-files":case"max-size":return void t(this.inputRef,[{name:e,value:r}]);case"multiple":return void t(this.inputRef,[{name:e,value:""===r||"true"===r,onlyAttr:!0}]);case"preview":return this.buildPreviewPanel(),void this.containerRef.addEventListener("click",this.onRemove);default:return}}},{key:"render",value:function(){var e=this.attachShadow({mode:"open"}),t=r("slot");this.inputRef=r("input",null,{attributes:[{name:"multiple",value:this.multiple,onlyAttr:!0},{name:"dropzone",value:this.dropzone,onlyAttr:!0},{name:"accept",value:this.accept},{name:"max-files",value:this.maxFiles},{name:"max-size",value:this.maxSize},{name:"type",value:"file"}],styles:{display:"none"}}),e.appendChild(this.inputRef),this.inputRef.insertAdjacentElement("afterend",t),this.uploadRef=t.assignedNodes()[1],this.buildPreviewPanel(),this.setEventListners()}},{key:"removeHandler",value:function(e){if(e.target.dataset.name){var t=e.target.dataset.name,n=this.containerRef.querySelector('[data-name="'.concat(t,'"]')).closest(".".concat(g));this.files=this.files.filter((function(e){return e.name!==t})),i("change",this,{files:this.files}),n.remove(),this.files.length||(this.inputRef.value="")}}},{key:"changeHandler",value:function(e){var t=Array.from(e.target.files);this.filesHandler(t)}},{key:"filesHandler",value:function(e){var t,n=this,r=[];e.length&&(this.inputRef.value="",Array.from(e).forEach((function(e,t){var o=n.errorHandler(e,t);if(o)return i("error",n,{file:e,type:o});n.files.some((function(t){return t.name===e.name&&t.size===e.size}))||(n.buildTemplate(e),r.push(e))})),r.length&&(this.files=[].concat(function(e){if(Array.isArray(e))return l(e)}(t=this.files)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||u(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),r),i("change",this,{files:this.files})))}},{key:"errorHandler",value:function(e,t){var n,r=null===(n=this.accept)||void 0===n?void 0:n.replace(/ /g,"");return r&&!r.split(",").some((function(t){return e.type.match(t)}))?"FORMAT":"number"==typeof this.maxFiles&&(t>=this.maxFiles||this.files.length>=this.maxFiles)?"MAX_FILES":"number"==typeof this.maxSize&&e.size>this.maxSize?"MAX_SIZE":void 0}},{key:"buildPreviewPanel",value:function(){var e;null===(e=this.containerRef)||void 0===e||e.remove(),this.containerRef=document.querySelector(this.preview),this.containerRef||(this.containerRef=r("div",null,{classes:["vr-preview"]}),this.insertAdjacentElement("afterend",this.containerRef))}},{key:"buildTemplate",value:function(e){var t=this;if(e.type.match("image")){var n=new FileReader;n.onload=function(n){var r=n.target;return t.containerRef.insertAdjacentHTML("afterbegin",t.getTemplatePreviewImage(e,r.result))},n.readAsDataURL(e)}else this.containerRef.insertAdjacentHTML("afterbegin",this.getTemplatePreviewImage(e))}},{key:"getTemplatePreviewImage",value:function(e,t){return'\n                <div class="'.concat(g,'">\n                    <div\n                        class="').concat("vr-preview-remove",'"\n                        data-name="').concat(e.name,'"\n                    >\n                        &times;\n                    </div>\n                    <div\n                        class="').concat("vr-preview-source",'"\n                        style="').concat(t?"background-image: url(".concat(t,")"):"",'"\n                    >\n                        ').concat(t?"":e.type,'\n                    </div>\n                    <div class="').concat("vr-preview-info",'">\n                        <span>').concat(this.getShortName(e.name),"</span>\n                        ").concat(function(e){if(!e)return"0 Byte";var t=parseInt(Math.floor(Math.log(e)/Math.log(1024)));return"".concat(Math.round(e/Math.pow(1024,t))," ").concat(["Bytes","KB","MB","GB","TB"][t])}(e.size),"\n                    </div>\n                </div>\n            ")}},{key:"setEventListners",value:function(){this.defaultEventListners(),this.dropzone&&this.dragOnDropEventListners()}},{key:"defaultEventListners",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=e?"addEventListener":"removeEventListener";this.uploadRef[t]("click",this.onSelect),this.inputRef[t]("change",this.onChange),this.containerRef[t]("click",this.onRemove)}},{key:"dragOnDropEventListners",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=t?"addEventListener":"removeEventListener";["dragenter","dragover","dragleave","drop"].forEach((function(t){return e.uploadRef[n](t,e.preventDefaults)})),["dragenter","dragover"].forEach((function(t){return e.uploadRef[n](t,e.onHighlight)})),["dragleave","drop"].forEach((function(t){return e.uploadRef[n](t,e.onUnhighlight)})),this.uploadRef[n]("drop",this.onDrop)}},{key:"clear",value:function(){for(;this.containerRef.firstChild;)this.containerRef.removeChild(this.containerRef.lastChild);this.inputRef.value="",this.files=[],i("change",this,{files:this.files})}},{key:"getShortName",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12,n=e.split("."),r=a(n,2),i=r[0],o=r[1];return"".concat(i.slice(0,t),".").concat(o)}},{key:"preventDefaults",value:function(e){e.preventDefault(),e.stopPropagation()}}])&&c(p.prototype,d),A&&c(p,A),R}(p(HTMLElement)));var A=document.querySelector('[data-language="html"]'),w=document.querySelector('[data-language="javascript"]'),R=document.querySelector(".button-uploader"),E=document.querySelector(".dropzone-uploader"),S=R.getAttribute("multiple"),x=R.getAttribute("accept"),k=R.getAttribute("max-files"),L=R.getAttribute("max-size"),j=document.querySelector("#multiple"),z=document.querySelector("#accept"),O=document.querySelector("#max-files"),C=document.querySelector("#max-size");A.textContent=n(568).Z,w.textContent=n(688).Z,j.checked=""===S||"true"===S,z.value=x,O.value=k,C.value=L,j.addEventListener("change",(function(e){R.setAttribute("multiple",e.target.checked),E.setAttribute("multiple",e.target.checked)})),z.addEventListener("change",(function(e){R.setAttribute("accept",e.target.value),E.setAttribute("accept",e.target.value)})),O.addEventListener("change",(function(e){R.setAttribute("max-files",e.target.value),E.setAttribute("max-files",e.target.value)})),C.addEventListener("change",(function(e){R.setAttribute("max-size",e.target.value),E.setAttribute("max-size",e.target.value)})),[R,E].forEach((function(e){e.addEventListener("change",(function(t){console.log(e.className,t.detail.files)}))})),[R,E].forEach((function(e){R.addEventListener("error",(function(t){var n=t.detail,r=n.file,i=n.type;console.log(e.className,{file:r,type:i})}))}))}()}();
//# sourceMappingURL=main.6dce757bf03549ce7621.js.map